@model WebApplication15.Models.LienHe

@{
    ViewBag.Title = "Chi tiết liên hệ";
}

<h2>Chi tiết liên hệ / Phản hồi</h2>

<div class="card p-3 mb-3">
    <p><strong>Họ tên:</strong> @Model.HoTen</p>
    <p><strong>Email:</strong> @Model.Email</p>
    <p><strong>SĐT:</strong> @Model.SoDienThoai</p>
    <p><strong>Nội dung khách hàng gửi:</strong> @Model.NoiDung</p>
    <p><strong>Ngày gửi:</strong> @Model.NgayGui</p>
</div>

<div class="card p-3 mb-3">
    <h5>Phản hồi tới khách hàng</h5>

    @using (Html.BeginForm("Reply", "LienHes", FormMethod.Post, new { area = "Admin" }))
    {
        @Html.AntiForgeryToken()
        @Html.Hidden("id", Model.MaLH)

        <div class="mb-3">
            <label>Phản hồi</label>
            <textarea name="PhanHoi" class="form-control" rows="6" required placeholder="Viết phản hồi cho khách...">@(
                Model.TrangThai != null && Model.TrangThai.StartsWith("PHANHOI|")
                    ? Model.TrangThai.Substring(8)
                    : ""
            )</textarea>
        </div>

        <button class="btn btn-primary">Gửi phản hồi</button>
        <a href="@Url.Action("Index")" class="btn btn-secondary ms-2">Quay lại</a>
    }
</div>

@if (!string.IsNullOrEmpty(Model.TrangThai) && Model.TrangThai.StartsWith("PHANHOI|"))
{
    <div class="card p-3">
        <h6>Đã phản hồi:</h6>
        <p>@Model.TrangThai.Substring(8)</p>
    </div>
}
else if (!string.IsNullOrEmpty(Model.TrangThai))
{
    <div class="card p-3">
        <h6>Trạng thái:</h6>
        <p>@Model.TrangThai</p>
    </div>
}
